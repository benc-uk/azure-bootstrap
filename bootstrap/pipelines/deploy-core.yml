#
# 
#

trigger: none

variables:
  TF_VARS_location: "North Europe"
  TF_VARS_resGroup: "core.foo1"
  azureConnection: "azure"

jobs:
- job: deployCore
  displayName: Deploy with Terraform
  
  steps:
  - bash: terraform init
    displayName: Terraform init
    workingDirectory: bootstrap/terraform/core    

  - task: AzureCLI@1
    displayName: Terraform apply core
    inputs:
      azureSubscription: $(azureConnection)
      inlineScript: terraform apply -auto-approve
      workingDirectory: bootstrap/terraform/core